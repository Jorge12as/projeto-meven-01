<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">

<h:head>
	<title>Curso JSF</title>
	<h:body>

		<ui:include src="/menu.xhtml" />
		<br />
		<br />
		<h:outputLabel value="CURSO JSF + PRIME FACES"
			style="margin-top:2%;margin-left:10%;" />
		<br />
		<br />
		<h:form id="formPessoa"
			rendered="#{pessoaBean.permiteAcesso('ADMINISTRADOR')}">

			<h:messages infoStyle="color:green;background:#66CDAA" />

			<h:panelGrid columns="2">
				<f:facet name="header">
					<h:outputText value="Cadastro de usuários" />
				</f:facet>
				<h:outputLabel value="Id: " />
				<h:inputText value="#{pessoaBean.pessoa.id}" readonly="true" />

				<h:outputLabel value="Nome: " />
				<h:inputText value="#{pessoaBean.pessoa.nome}" rendered="true"
					requiredMessage="Informe o nome do usuário"
					validatorMessage="O nome tem que ter no minimo 5 letras">
					<f:validateLength minimum="5" maximum="30" />
				</h:inputText>

				<h:outputLabel value="Sobre nome: " />
				<h:inputText value="#{pessoaBean.pessoa.sobrenome}" />

				<h:outputLabel value="Idade: " />
				<h:inputText value="#{pessoaBean.pessoa.idade}" />

				<h:outputLabel value="Sexo: " />
				<h:selectOneMenu id="campoSexo" value="#{pessoaBean.pessoa.sexo}"
					required="false">
					<f:selectItem itemValue="NÃO" itemLabel="[-Selecione-]"
						noSelectionOption="true" />
					<f:selectItem itemValue="MASCULINO" itemLabel="Masculino" />
					<f:selectItem itemValue="FEMININO" itemLabel="Femiino" />
				</h:selectOneMenu>

				<h:outputLabel value="Nascimento:" />
				<h:inputText value="#{pessoaBean.pessoa.dataNascimento}"
					converterMessage="Data de nascimento errada!">
					<f:convertDateTime pattern="dd/MM/yyyy" dateStyle="full"
						locale="pt_BR" timeZone="GMT-03:00" />
				</h:inputText>

				<h:outputLabel value="Frameworks: " />
				<h:selectManyMenu id="campoFrameworks" style="height:140px;"
					value="#{pessoaBean.pessoa.frameworks}" required="false">
					<f:selectItem itemValue="NÃO" itemLabel="[-Selecione-]"
						noSelectionOption="true" />
					<f:selectItem itemValue="Hibernate" />
					<f:selectItem itemValue="Spring mvc" />
					<f:selectItem itemValue="Jsp" />
					<f:selectItem itemValue="Prime faces" />
					<f:selectItem itemValue="Jsf" />
				</h:selectManyMenu>

				<h:outputLabel value="Ativo: " />
				<h:selectBooleanCheckbox value="#{pessoaBean.pessoa.ativo}" />

				<h:outputLabel value="CEP:" />
				<h:inputText value="#{pessoaBean.pessoa.cep}">
					<f:ajax event="blur" execute="@this" listener="#{pessoaBean.pesquisaCep()}"/>
				</h:inputText>
				
				<h:outputLabel value="Usuário: " />
				<h:inputText value="#{pessoaBean.pessoa.login}" />

				<h:outputLabel value="Senha: " />
				<h:inputSecret value="#{pessoaBean.pessoa.senha}" />

				<h:outputLabel value="Perfil: " />
				<h:selectOneMenu id="usuarioPerfil"
					value="#{pessoaBean.pessoa.usuarioPerfil}" required="false">
					<f:selectItem itemLabel="[-Selecione-]" noSelectionOption="true" />
					<f:selectItem itemValue="ADMINISTRADOR" itemLabel="Administrador" />
					<f:selectItem itemValue="SUPERVISOR" itemLabel="Supervisor" />
					<f:selectItem itemValue="USUARIO PADRÃO" itemLabel="Usuario padrão" />
				</h:selectOneMenu>

				<h:outputLabel value="Programador: " />
				<h:selectOneRadio value="#{pessoaBean.pessoa.nivelProgramador}"
					layout="pageDirection">
					<f:selectItem itemValue="J" itemLabel="Junior" />
					<f:selectItem itemValue="P" itemLabel="Pleno" />
					<f:selectItem itemValue="S" itemLabel="Sênio" />
					<f:selectItem itemValue="E" itemLabel="Expecialista" />
				</h:selectOneRadio>

				<h:outputLabel value="Linguagens: " />
				<h:selectManyCheckbox value="#{pessoaBean.pessoa.linguagens}">
					<f:selectItem itemValue="1" itemLabel="Java" />
					<f:selectItem itemValue="2" itemLabel="PHP" />
					<f:selectItem itemValue="3" itemLabel="Pyton" />
					<f:selectItem itemValue="4" itemLabel="C#" />
					<f:selectItem itemValue="5" itemLabel="Sql" />
				</h:selectManyCheckbox>

				<h:panelGroup>
					<h:commandButton action="#{pessoaBean.novo()}" value="Novo"
						id="botaoNovo" image="/resources/img/novo.png"
						title="Novo usuário" immediate="true">
						<f:ajax execute="botaoNovo" render="@form" />
					</h:commandButton>
					<h:commandButton action="#{pessoaBean.salvar()}" value="Salvar"
						image="/resources/img/salvar.png" title="Gravar usuário" />
					<h:commandButton action="#{pessoaBean.removeId()}" value="Excluir"
						image="/resources/img/excluir.png" title="Excluir usuário" />

					<h:commandButton id="botaoLimpar" value="Limpar" action="#{pessoaBean.Limpar()}"
						image="/resources/img/clean.png" title="Limpar">
						<f:ajax execute="botaoLimpar" render="@form" />
					</h:commandButton>

				</h:panelGroup>

			</h:panelGrid>
		</h:form>

		<h:form id="formTable">
			<h:dataTable value="#{pessoaBean.listPessoas}" var="vPessoa"
				border="2" cellpadding="6">
				<f:facet name="header">
					Lista de usuário cadastrados
				</f:facet>
				<h:column>
					<f:facet name="header">ID</f:facet>
					<h:outputText value="#{vPessoa.id}" />
				</h:column>
				<h:column>
					<f:facet name="header">Nome da passoa</f:facet>
					<h:outputText value="#{vPessoa.nome}" />
				</h:column>
				<h:column>
					<f:facet name="header">Sobrenome</f:facet>
					<h:outputText value="#{vPessoa.sobrenome}" />
				</h:column>
				<h:column>
					<f:facet name="header">Idade</f:facet>
					<h:outputText value="#{vPessoa.idade}" />
				</h:column>
				<h:column>
					<f:facet name="header">Data de nascimento</f:facet>
					<h:outputText value="#{vPessoa.dataNascimento}" />
				</h:column>

				<h:column>
					<f:facet name="header">Editar</f:facet>
					<h:commandLink title="Editar">
						<f:setPropertyActionListener target="#{pessoaBean.pessoa}"
							value="#{vPessoa}" />
						<h:graphicImage value="/resources/img/editar.png" />
					</h:commandLink>
				</h:column>

				<h:column rendered="#{pessoaBean.permiteAcesso('ADMINISTRADOR')}">
					<f:facet name="header">Excluir</f:facet>
					<h:commandLink title="Excluir" action="#{pessoaBean.removeId}">
						<f:setPropertyActionListener target="#{pessoaBean.pessoa}"
							value="#{vPessoa}" />
						<h:graphicImage value="/resources/img/excluir.png" />
					</h:commandLink>
				</h:column>

			</h:dataTable>

		</h:form>
	</h:body>
</h:head>
</html>